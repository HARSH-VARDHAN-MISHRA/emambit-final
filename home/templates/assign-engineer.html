
<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  {% include 'header-links.html' %}
</head>

<body>
  {% include 'header.html' %}
  {% if user.is_authenticated and user.is_superuser %}
  <section class="nav-section">
    {% include 'subtitle.html' %}
    {% include 'message.html' %}

    <div class="breadcum">
        <h2>Assign Engineer </h2>
        <p> <a href="/">  Dashboard</a> / <a href="/manage-engineer">  Our Engineers</a> / Assign Engineer</p>
    </div>

    <div class="assign-engineer p-3">
        <form class="row g-3" method="post"  id="assign_form">
          {% csrf_token %}
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Select Your Company</label>
              <select class="js-example-basic-single" name="company" class="form-select" name="state">
              
                {% for com in companydata %}
                <option value="{{com}}">{{com.company_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Select Your Manager</label>
              <select class="js-example-basic-single" name="manager_name" class="form-select" name="state">
                {% for mng in managers  %}
                <option value="{{mng}}">{{mng.first_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Select Engineer 1</label>
              <select class="js-example-basic-single" name="engineer_one" class="form-select" name="state">
                <option >Select 1st Eng.</option>
                {% for eng in engineers  %}
                <option value="{{eng}}">{{eng.first_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Select Engineer 2</label>
              <select class="js-example-basic-single" name="engineer_two" class="form-select" name="state">
                <option >Select 2nd Eng.</option>
                {% for eng in engineers  %}
                <option value="{{eng}}">{{eng.first_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Select Engineer 3</label>
              <select class="js-example-basic-single" name="engineer_three" class="form-select" name="state">
                <option >Select 3rd Eng.</option>
                {% for eng in engineers  %}
                <option value="{{eng}}">{{eng.first_name}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label for="purpose" class="form-label">Purpose / Type of Visit *</label>
              <input type="text" class="form-control" name="visit_purpose" id="purpose" placeholder="Enter the Purpose" required>
            </div>

            <div class="col-md-3">
              <label for="selectGender" class="form-label">Machine Type</label>
              <input type="text" name="machine_type" class="form-control" required>
            </div>

            <div class="col-md-3">
              <label for="Departure" class="form-label">Leave Date*</label>
              <input type="datetime-local" name="leave_date" class="form-control" id="purpose" placeholder="Enter the Purpose" required>
            </div>

            <div class="col-md-3">
              <label for="Departure" class="form-label">Reach Date*</label>
              <input type="datetime-local" name="reach_date" class="form-control" id="purpose" placeholder="Enter the Purpose" required>
            </div>
            <div class="col-md-3">
              <label for="selectGender" class="form-label">Travel By</label>
              <select id="inputState" name="travel" class="form-select" required>
                {% for travel in travel_by_data %}
                <option value="{{travel.travel_by}}">{{travel.travel_by}}</option>
                {% endfor %}
              </select>
            </div>

            <div class="col-md-3 col-6">
              <label for="equipment1" class="form-label">Equipment</label>
              <input type="text" id="equipment1" name="equipment" class="form-control" >
            </div>

            <hr>
            <div class="col-12  text-uppercase">
              <h5>Advance Amount</h5>
            </div>

            <div class="col-12">
              <div class="row">
                <div class="col-md-3 col-6">
                  <label for="selectGender" class="form-label">Select Engineer</label>
                  <select class="js-example-basic-single" name="advance_manager" class="form-select" >
                    <option >Select  Eng.</option>
                    {% for en in advance_engineers  %}
                    <option value="{{en.first_name}}">{{en.first_name}}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="col-md-3 col-6">
                  <label for="advanceMoney1" class="form-label">Advance Money</label>
                  <input type="number" id="advanceMoney" name="manager_money" class="form-control" min="0" >
                </div>
                
              </div>
            </div>
            <div class="col-12">
              <div class="row">

                <div class="col-md-3 col-6">
                  <label for="selectGender" class="form-label">Select Engineer </label>
                  <select class="js-example-basic-single" name="advance_engineerone" class="form-select" >
                    <option >Select Eng.</option>
                    {% for gn in advance_engineers  %}
                    <option value="{{gn.first_name}}">{{gn.first_name}}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="col-md-3 col-6">
                  <label for="advanceMoney1" class="form-label">Advance Money</label>
                  <input type="number" id="advanceMoney" name="advance_money1" class="form-control" min="0" >
                </div>
                
              </div>
            </div>
            <hr>
            <div class="col-12">
              <div class="row">

                <div class="col-md-3 col-6">
                  <label for="selectGender" class="form-label">Select Engineer </label>
                  <select class="js-example-basic-single" name="advance_engineertwo" class="form-select" >
                    <option >Select Eng.</option>
                    {% for kn in advance_engineers  %}
                    <option value="{{kn.first_name}}">{{kn.first_name}}</option>
                    {% endfor %}
                  </select>
                </div>

                <div class="col-md-3 col-6">
                  <label for="advanceMoney2" class="form-label">Advance Money</label>
                  <input type="number" id="advanceMoney2" name="advance_money2" class="form-control" min="0" >
                </div>
                
              </div>
            </div>
            <div class="col-12">
              <div class="row">

                <div class="col-md-3 col-6">
                  <label for="selectGender" class="form-label">Select Engineer </label>
                  <select class="js-example-basic-single" name="advance_engineerthree" class="form-select" >
                    <option >Select  Eng.</option>
                    {% for gmd in advance_engineers  %}
                    <option value="{{gmd.first_name}}">{{gmd.first_name}}</option>
                    {% endfor %}
                  </select>
                </div>  

                <div class="col-md-3 col-6">
                  <label for="advanceMoney3" class="form-label">Advance Money</label>
                  <input type="number" id="advanceMoney3" name="advance_money3" class="form-control" min="0" >
                </div>
                
              </div>
            </div>

            
            
            


            <div class="row mb-5 mt-3">
              <div class="col-md-12 text-center create-project-form" style="background: transparent;">
                  <button type="submit" class="btn" >SAVE</button>
                  <a href="/" class="btn btn-warning">RESET</a>
                  <a href="/manage-engineer"><button type="button" class="btn btn-danger" >CANCEL</button></a>
              </div>
            </div>
        </form>
    </div>





  </section>
  <div class="preloader" id="preloader">Sending Mail &nbsp; </div>



<style>
  .preloader {
      position: fixed;
      top: 0;
      left: 0;
      right:0;
      bottom: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      overflow: hidden;
  }

  .preloader::after {
      content: '';
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 2s linear infinite;
  }

  @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
  }

</style>

   <script>
    let form =document.getElementById('assign_form')
    form.addEventListener('submit',()=>{
      document.querySelector(".preloader").style.display = "flex";
    })
   </script>
  {% include 'admin-footer.html' %}
  {% include 'footer-links.html' %}

 <script>
  $(document).ready(function() {
    $('.js-example-basic-single').select2();
  });

 </script>
 {% else %}
    <script>
        window.location.href='/page-note-found'
    </script>
    {% endif %}

    {% comment %} <script>
      function as(){
        Swal.fire({
          position: "top-end",
          icon: "success",
          title: "Engineer Assigned Successfully",
          showConfirmButton: false,
          timer: 1500,
          customClass: {
            popup: 'bgc'
          }
        });
      }
      as()
    </script> {% endcomment %}
    <style>
      .bgc{
        background-color: #efefef;
        color: black;
      }
    </style>
</body>

</html>